<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>重置密码</title>
    <script src="../../js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript">
        $(function(){
            $("#send").click(function(){
                var phone = $("#phone").val();//获取手机号
                var reg = /^1[34578]\d{9}$/;
                if(!reg.test(phone)){ //校验手机号码格式
                    alert("请先输入您的正确手机号！");
                    $("#phone").focus();
                    return false;
                }

                $.ajax({
                    url:"../../sendCodeController/sendCode",
                    type:"post",
                    data:{"phone":phone},
                    success:function(data){
                        if(data=="OK"){
                            get_code_time(); //发送成功则执行get_code_time()函数
                        }else{
                            alert("过于频繁");
                        }
                    },
                    error:function(data){
                        alert("请稍后再试！");
                    }
                },"text");

            });
            var wait=60;
            function get_code_time(){
                if(wait==0){
                    $("#send").removeAttr("disabled");//移除获取验证码按钮的disabled属性
                    $("#send").val("获取验证码");
                    wait=60;
                }else{
                    $("#send").attr("disabled",true);
                    $("#send").val("剩("+ wait +")秒");
                    wait --;
                    alert(wait);
                    setTimeout("get_code_time()",1000);

                }
            }
        });



    </script>
</head>
<body>
    <h4>重置密码:</h4>
    <form action="../../sendCodeController/sendCode" method="post">
        <table>
            <tr>
                <td>手机号:</td><td><input type="text" name="phone" id="phone"/></td>
            </tr>
            <tr>
                <td>验证码:</td><td><input type="text"><input type="button" id="send" value="发送验证码"/></td>
            </tr>
            <tr>
                <td>登录密码:</td><td><input type="password" name="password"/></td>
            </tr>
            <tr>
                <td colspan="2" style="text-align: center"><input type="submit" value="登录"/></td>
            </tr>
        </table>
    </form>
</body>
</html>